(function(e,t,n){"use strict";var r=function(n){if(e===this){return new r(n)}if(!n||!t(n)){return false}this._self=this;this._$accordion=t(n);this._$sections=null;this._$openedSections=[];this._options={toggleElem:"li > .header",targetElem:"li > .content",openLimit:1,allowAllClosed:false,duration:400,easing:"swing"};this._animateOptions={};return this};r.fn=r.prototype={init:function(e){t.extend(this._options,e);t.extend(this._animateOptions,{duration:this._options.duration,easing:this._options.easing});this._$sections=this._$accordion.find(this._options.toggleElem);this._$sections.on("click",t.proxy(this.toggleSection,this))},openSection:function(e,n){var r=t(e);var i=t(e).siblings(this._options.targetElem);if(r&&i&&this._options.openLimit){if(this._options.openLimit===1){this.closeAll(true)}else if(this._$openedSections.length>=this._options.openLimit){return false}}this._$openedSections.push(r.get(0));if(n){r.parent().addClass("accordion-open");i.slideDown(this._animateOptions)}else{r.parent().addClass("accordion-open");i.show()}},closeSection:function(e,n,r){if(!this._options.allowAllClosed&&!r){if(this._$openedSections.length<=1){return}}var i=t(e);var s=t(e).siblings(this._options.targetElem);for(var o=0;o<this._$openedSections.length;o++){if(i.is(this._$openedSections[o])){this._$openedSections.splice(o,1);break}}if(n){s.slideUp(t.extend({},this._animateOptions,{complete:function(){i.parent().removeClass("accordion-open")}}))}else{s.hide();i.parent().removeClass("accordion-open")}},toggleSection:function(e){if(e.delegateTarget){e=e.delegateTarget}var n=t(e);var r=n.siblings(this._options.targetElem);if(r.is(":visible")){this.closeSection(e,true)}else{this.openSection(e,true)}},closeAll:function(e){for(var t=0;t<this._$sections.length;t++){this.closeSection(this._$sections[t],e,true)}}};e.PorkAccordion=r})(window,jQuery)
